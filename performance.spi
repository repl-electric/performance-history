use_bpm 127

def midi_fn(n, *args)
  if n
    vel = 20
    if args && args[0].is_a?(Numeric)
      vel,args = args[0], args[1..-1]
    end
    midi n, vel, *(args << {port: :iac_bus_1} << {channel: 1})
  end
end

live_loop :demo do
  tick
  midi :c3, channel: 3
  midi :a3, channel: 1
  sleep 1

  midi :a2, channel: 2
  sleep 1
end
